# ğŸš€ Device Management Setup

Your devices are now organized in separate category files that automatically merge during the build!

## The Simple Workflow

### 1. One-time: Extract Categories (Initial Setup)

```bash
# Extract each category into its own file
npm run extract-category "Audio & Hi-Fi"
npm run extract-category "Cameras"
npm run extract-category "Action Cameras"
npm run extract-category "Drones"
npm run extract-category "Gaming Handhelds"
npm run extract-category "Dash Cams"
npm run extract-category "Computing & Tablets"
npm run extract-category "Security Cameras"
```

This creates organized files in `data/categories/` for easier management.

### 2. Edit Category Files

All device files are in `data/categories/`:
```
data/categories/
â”œâ”€â”€ audio-and-hi-fi.json          â† Edit audio devices here
â”œâ”€â”€ cameras.json                   â† Edit camera devices here
â”œâ”€â”€ action-cameras.json
â”œâ”€â”€ drones.json
â”œâ”€â”€ gaming-handhelds.json
â”œâ”€â”€ dash-cams.json
â”œâ”€â”€ computing-and-tablets.json
â””â”€â”€ security-cameras.json
```

Much smaller, focused files instead of one giant 7300-line file!

### 3. Build As Usual

```bash
npm run build          # Auto-merges categories, generates site
# OR
npm run build:all      # Auto-merges categories, builds EN + JA versions
```

**That's it!** The build process automatically:
- âœ… Merges all category files into devices.json
- âœ… Validates all devices
- âœ… Generates all pages
- âœ… Creates sitemaps & redirects

## Example: Add a New Audio Device

1. Open `data/categories/audio-and-hi-fi.json`
2. Copy the last device object (change the comma after it)
3. Paste and customize:
   ```json
   {
     "id": "sony-nw-a300",
     "name": "Sony Walkman NW-A300",
     "category": "Audio & Hi-Fi",
     "slug": "sony-nw-a300",
     "searchTerms": ["sony walkman", "nw-a300"],
     "sdCard": { ... },
     ...
   }
   ```
4. Save
5. Run `npm run build` - done!

## Why This Is Better

âŒ **Before**: 
- Single 7300+ line `devices.json` file
- Impossible to find devices
- Huge git diffs for tiny changes
- JSON syntax errors affect everything

âœ… **Now**:
- Organized by category (10-50 devices per file)
- Easy to find what you need
- Clean, focused edits
- Syntax errors only affect one category

---

## Details

### File Structure

Each category file is a simple JSON array:

```json
[
  {
    "id": "device-slug",
    "name": "Device Name",
    "category": "Category Name",
    "slug": "device-slug",
    "searchTerms": ["term1", "term2"],
    "sdCard": {
      "type": "microSD UHS-I",
      "minSpeed": "V30",
      "minWriteSpeed": "30 MB/s",
      "recommendedCapacity": ["128GB", "256GB"],
      "maxCapacity": "512GB"
    },
    "whySpecs": "Explanation of why these specs...",
    "recommendedBrands": [
      { "id": "brand-id" }
    ],
    "faq": [
      {
        "q": "Question?",
        "a": "Answer"
      }
    ]
  }
]
```

### The Auto-Merge Process

When you run `npm run build`:

```
data/categories/*.json
  â”œâ”€â”€ audio-and-hi-fi.json    (10 devices)
  â”œâ”€â”€ cameras.json             (20 devices)
  â””â”€â”€ ... (other categories)
       â†“ [Auto-merge]
       â†“ [Validate]
       â†“ [Remove & from slugs]
       â†“
    data/devices.json (single merged file)
       â†“ [Generate pages]
       â†“
    dist/ (final built site)
```

### What the `extract-category` Script Does

One-time setup. Extracts devices from `data/devices.json` by category name:

```bash
npm run extract-category "Audio & Hi-Fi"
```

Creates `data/categories/audio-and-hi-fi.json` with all Audio & Hi-Fi devices.

---

## Quick Reference

| Task | Command |
|------|---------|
| Initial setup | `npm run extract-category "Category Name"` |
| Build site | `npm run build` |
| Build EN + JA | `npm run build:all` |
| Development | `npm run dev` |
| View built site | `npx http-server dist` |

---

**Ready?** 
1. Run the extract command for each category
2. Edit files in `data/categories/`
3. Run `npm run build` and you're done!
